<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title> Open Graph Debug </title>

  <meta name="og:url" content="http://localhost:3001">
  <meta name="og:title" content="Open Graph Debug">
  <meta name="og:description" content="Open Graph Debug for local server">

  <link rel="stylesheet" href="public/css/main.css">
  <link rel="stylesheet" href="public/css/result.css">
</head>
<body>
  <iframe id="iframe" src="" frameborder="0" style="display: none;"></iframe>

  <div class="wrap">
    <div class="header">
      <header>
        <div>
          <a class="header__logo" href="/og-debug">
            <img height="28" width="300" src="public/images/logo.jpg?new=1" alt="">
          </a>
        </div>
      </header>
    </div>

    <div class="main">
      <div class="main__wrap" title="Sharing Debugger">
        <div class="main__layout">
          <h1> Sharing Debugger </h1>

          <div class="main__menu">
            <a class="active" href="/tools/debug"> Sharing Debugger </a>
            <a href="/tools/history"> History </a>
          </div>

          <form class="main__form" id="debug">
            <div class="main__form__input">
              <input id="target" type="url" required="1" placeholder="Enter a URL to see the information that is used when it is shared on SNS" tabindex="0">
            </div>

            <div class="main__form__btn">
              <button type="submit">
                Debug
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="guide">

    </div>

    <div class="result" style="display: none;">
      <div id="warning" class="result__type result--warning">
        <div class="result__title">
          <i></i>
          <span> Warnings That Should Be Fixed </span>
        </div>
      </div>

      <div class="result__type result__content">
        <div class="result__title">
          <span> How we scraped the URL </span>
        </div>
        <div class="result__body">
          <table>
            <tbody>
              <tr>
                <td class="result__body--title"> Fetched URL </td>
                <td id="show_url" class="result__body--content">

                </td>
              </tr>
              <tr style="display: none;">
                <td class="result__body--title"> Canonical URL </td>
                <td id="show_canonical_url" class="result__body--content">  </td>
              </tr>
              <tr style="display: none;">
                <td class="result__body--title"> Link Preview </td>
                <td id="show_preview" class="result__body--content">
                  <div class="result__preview">
                    <img src="" alt="">
                    <div class="result__preview__info">
                      <p id="result_title">

                      </p>
                      <p id="result_desc">
                      </p>
                      <p id="result_url">
                      </p>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="result__type result__properties">
        <div class="result__title">
          <span> Based on the raw tags, we constructed the following Open Graph properties. </span>
        </div>

        <div class="result__body">
          <table>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div id="hidden__div" style="display: none;"></div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="public/js/submit.js"></script>
  <script>
    $(function () {
      function getQueryString() {
        var qs    = {};
        var split = location.search.substring(1).split('&');

        $.each(split, function (idx) {
          var pair = split[idx];
          qs[pair.split('=')[0]] = pair.split('=')[1];
        });

        return qs;
      }

      var qs = getQueryString();

      if (qs.target) {
        $("#target").val(qs.target);
        submit();
      }
    });
  </script>
</body>
</html>
